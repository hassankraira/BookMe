import{B as S,C as i,D as r,Da as T,E as w,H as C,I as u,Ia as L,J as a,Ja as W,La as z,Q as d,R as y,T as O,U as f,V as _,W as h,X as k,a as v,fa as N,j as P,l,m as p,p as M,qa as I,ra as E,s as c,sa as V,t as b,ta as A,ua as D,va as F,y as m,z as g}from"./chunk-I3SPCZPR.js";function B(o,x){o&1&&(i(0,"a",12),d(1,"Become a Provider"),r())}function R(o,x){o&1&&(i(0,"a",13),d(1,"Manage My Services"),r())}function j(o,x){if(o&1){let e=C();i(0,"div",14)(1,"h2"),d(2,"Edit Profile"),r(),i(3,"form",15),u("ngSubmit",function(){l(e);let t=a(2);return p(t.updateuser())}),i(4,"input",16),h("ngModelChange",function(t){l(e);let s=a(2);return _(s.user.firstName,t)||(s.user.firstName=t),p(t)}),r(),i(5,"input",17),h("ngModelChange",function(t){l(e);let s=a(2);return _(s.user.lastName,t)||(s.user.lastName=t),p(t)}),r(),i(6,"input",18),h("ngModelChange",function(t){l(e);let s=a(2);return _(s.user.phone,t)||(s.user.phone=t),p(t)}),r(),i(7,"input",19),u("change",function(t){l(e);let s=a(2);return p(s.onFileSelected(t))}),r(),i(8,"button",20),d(9,"Save Changes"),r(),i(10,"button",21),u("click",function(){l(e);let t=a(2);return p(t.actvieSection="")}),d(11,"Cancel"),r()()()}if(o&2){let e=a(2);c(4),f("ngModel",e.user.firstName),c(),f("ngModel",e.user.lastName),c(),f("ngModel",e.user.phone)}}function J(o,x){if(o&1){let e=C();i(0,"div",1)(1,"div",2)(2,"div",3),w(3,"img",4),r(),i(4,"div",5)(5,"h1"),d(6),r(),i(7,"p"),d(8),r(),i(9,"div",6),m(10,B,2,0,"a",7)(11,R,2,0,"a",8),r(),i(12,"button",9),u("click",function(){l(e);let t=a();return p(t.actvieSection="edit")}),d(13,"Edit profile"),r(),i(14,"button",9),u("click",function(){l(e);let t=a();return p(t.logout())}),d(15,"Log Out"),r()()(),w(16,"div",10),m(17,j,12,3,"div",11),r()}if(o&2){let e=a();S("edit-mode",e.actvieSection=="edit")("back",e.actvieSection===""),c(3),g("src",e.user2.image,M)("alt",e.user2.firstName),c(3),O("",e.user2.firstName," ",e.user2.lastName,""),c(2),y(e.user2.email),c(2),g("ngIf",e.user.type!=="provider"),c(),g("ngIf",e.user.type==="provider"),c(6),g("ngIf",e.actvieSection=="edit")}}var Z=(()=>{class o{constructor(e,n){this.router=e,this.db=n,this.user=JSON.parse(localStorage.getItem("user")||"{}"),this.user2=JSON.parse(localStorage.getItem("user")||"{}"),this.actvieSection="",this.passwordError="",this.passwordSuccess="",this.passwordData={oldPassword:"",newPassword:"",confirmPassword:""},this.selectedFile=null,this.imagePreview=null}ngOnInit(){window.scrollTo(0,0)}toggleSection(e){this.actvieSection=e}logout(){localStorage.removeItem("user"),this.router.navigate(["/login"])}removesub(){this.db.removeSubsicribtion(this.user.id).subscribe({next:()=>{this.user.type="customer",this.user.subscription_active=!1,localStorage.setItem("user",JSON.stringify(this.user))}})}changePassword(){if(this.passwordData.newPassword!==this.passwordData.confirmPassword){alert("New passwords do not match.");return}this.db.changePassword({id:this.user.id,oldPassword:this.passwordData.oldPassword,newPassword:this.passwordData.newPassword}).subscribe(e=>this.passwordSuccess="password changed successfully",e=>this.passwordError="old password incorrect")}updateuser(){let e=new FormData;e.append("id",this.user.id),e.append("firstName",this.user.firstName),e.append("lastName",this.user.lastName),e.append("phone",this.user.phone),e.append("oldImage",this.user.image),this.selectedFile&&e.append("image",this.selectedFile),this.db.updateUserINFO(e).subscribe({next:n=>{n.image&&(this.user.image=n.image),localStorage.setItem("user",JSON.stringify(this.user)),this.user2=v({},this.user),alert("Your data has been updated successfully.")},error:n=>{console.error("Error while updating:",n),alert("Error while updating")}})}onFileSelected(e){let n=e.target.files[0];if(n&&n.size<=1024*1024){this.selectedFile=n;let t=new FileReader;t.onload=()=>{this.imagePreview=t.result,this.user.image=t.result},t.readAsDataURL(n)}else alert("\u064A\u062C\u0628 \u0623\u0644\u0627 \u062A\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u0635\u0648\u0631\u0629 1 \u0645\u064A\u063A\u0627\u0628\u0627\u064A\u062A"),this.selectedFile=null,this.imagePreview=null}static{this.\u0275fac=function(n){return new(n||o)(b(L),b(z))}}static{this.\u0275cmp=P({type:o,selectors:[["app-account"]],standalone:!0,features:[k],decls:1,vars:1,consts:[["class"," container2",3,"edit-mode","back",4,"ngIf"],[1,"container2"],[1,"info"],[1,"infoIMG"],[3,"src","alt"],[1,"infoDetals"],[1,"center"],["class","btn btn-light center","routerLink","/BecomeProvider",4,"ngIf"],["class","btn btn-light center","routerLink","/Provide",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"gradient-glow"],["class","edit-card",4,"ngIf"],["routerLink","/BecomeProvider",1,"btn","btn-light","center"],["routerLink","/Provide",1,"btn","btn-light","center"],[1,"edit-card"],[3,"ngSubmit"],["type","text","name","firstName","placeholder","First Name",3,"ngModelChange","ngModel"],["type","text","name","lastName","placeholder","Last Name",3,"ngModelChange","ngModel"],["type","text","name","phone","placeholder","Phone number",3,"ngModelChange","ngModel"],["type","file","accept","image/*",3,"change"],["type","submit",1,"btn","orange-pink"],["type","button",1,"btn","pink-red",3,"click"]],template:function(n,t){n&1&&m(0,J,18,12,"div",0),n&2&&g("ngIf",t.user2)},dependencies:[W,N,T,F,I,E,V,D,A],styles:[".container2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:10%;gap:5%}.info[_ngcontent-%COMP%], .edit-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:double 3px transparent;border-radius:12px;background-image:linear-gradient(#0a0a0f,#0a0a0f),linear-gradient(90deg,#fa8604,#f900d1);background-origin:border-box;background-clip:padding-box,border-box;background-repeat:no-repeat;background-size:100% 100%;outline:none;cursor:text;padding:2% 5%;text-align:center;width:40%;color:#fff}.edit-card[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_showEditCard .4s ease forwards}.container2.back[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_moveInfoRight .4s ease forwards}@keyframes _ngcontent-%COMP%_showEditCard{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.container2.edit-mode[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_moveInfoLeft 1s ease forwards}@keyframes _ngcontent-%COMP%_moveInfoLeft{0%{gap:0}to{gap:5%}}@keyframes _ngcontent-%COMP%_moveInfoRight{0%{transform:translate(-1%)}to{transform:translate(0)}}.gradient-glow[_ngcontent-%COMP%]{height:90vh;aspect-ratio:1/1;position:absolute;top:60%;left:50%;transform:translate(-50%,-50%);border-radius:50%;background:linear-gradient(90deg,#9b5300,#f900d1);filter:blur(200px);z-index:-1;opacity:1;animation:rotate-glow 3s ease-in,rotate 18s linear 3s infinite}.infoIMG[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;object-fit:cover}.infoDetals[_ngcontent-%COMP%]{margin-top:20px}.infoDetals[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:10px 0 5px;font-size:1.5rem}.infoDetals[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin-bottom:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fa8604,#f900d1);border:none;padding:12px 0;width:100%;border-radius:8px;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;margin-bottom:5%}.btn[_ngcontent-%COMP%]:hover{opacity:.9}@media (max-width:850px){.gradient-glow[_ngcontent-%COMP%]{height:40vh;filter:blur(140px)}.info[_ngcontent-%COMP%], .edit-card[_ngcontent-%COMP%]{padding:5% 2%;width:100%;margin-bottom:5%}.container2[_ngcontent-%COMP%]{flex-direction:column;padding:10% 2% 30%;position:relative}}h2[_ngcontent-%COMP%]{color:#fff;margin:10px 0}p[_ngcontent-%COMP%]{color:#ccc}input[_ngcontent-%COMP%]{width:100%;padding:12px 15px;margin-bottom:20px;font-size:15px;color:#fff;border:double 3px transparent;border-radius:12px;background-image:linear-gradient(#0a0a0f,#0a0a0f),linear-gradient(90deg,#fa8604,#f900d1);background-origin:border-box;background-clip:padding-box,border-box;background-repeat:no-repeat;background-size:100% 100%;outline:none;cursor:text;transition:background-color 100000s ease-in-out 0s}input[_ngcontent-%COMP%]::placeholder{color:#ffffff75}"]})}}return o})();export{Z as AccountComponent};
